

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ml.rl.preprocessing.feature_extractor module &mdash; Horizon 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Horizon
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">ml.rl.preprocessing.feature_extractor module</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Horizon</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>ml.rl.preprocessing.feature_extractor module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reference/ml.rl.preprocessing.feature_extractor.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-ml.rl.preprocessing.feature_extractor">
<span id="ml-rl-preprocessing-feature-extractor-module"></span><h1>ml.rl.preprocessing.feature_extractor module<a class="headerlink" href="#module-ml.rl.preprocessing.feature_extractor" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase">
<em class="property">class </em><code class="descclassname">ml.rl.preprocessing.feature_extractor.</code><code class="descname">FeatureExtractorBase</code><span class="sig-paren">(</span><em>model_feature_config: Optional[ml.rl.types.ModelFeatureConfig] = None</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This is not a transformer because Caffe2 has a weird API. We cannot directly
call functions. It’s easier to handle separately.</p>
<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.create_const">
<code class="descname">create_const</code><span class="sig-paren">(</span><em>init_net</em>, <em>name</em>, <em>value</em>, <em>dtype=caffe2.python.core.DataType.FLOAT</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.create_const" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.create_empty_range">
<code class="descname">create_empty_range</code><span class="sig-paren">(</span><em>init_net: caffe2.python.core.Net</em><span class="sig-paren">)</span> &#x2192; caffe2.python.core.BlobReference<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.create_empty_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.create_id_mapping">
<code class="descname">create_id_mapping</code><span class="sig-paren">(</span><em>init_net: caffe2.python.core.Net, name: str, mapping: List[int]</em><span class="sig-paren">)</span> &#x2192; caffe2.python.core.BlobReference<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.create_id_mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Given the ID list in the mapping, create index from ID to its (1-base) index.</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.create_id_mappings">
<code class="descname">create_id_mappings</code><span class="sig-paren">(</span><em>init_net: caffe2.python.core.Net, id_mapping_configs: Dict[str, ml.rl.types.IdMapping]</em><span class="sig-paren">)</span> &#x2192; Dict[str, caffe2.python.core.BlobReference]<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.create_id_mappings" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.create_net">
<code class="descname">create_net</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; ml.rl.preprocessing.feature_extractor.FeatureExtractorNet<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.create_net" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns FeatureExtractorNet to perform feature extraction.</p>
<p>The returned net must have input &amp; output record set so that it can be
bound to actual inputs/outputs</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>ws</em>, <em>extract_record</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>If the extractor is to be run, e.g., by the reader, then subclass should
implement</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extract_record</strong> (<em>schema.Field</em>) – the output the net</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract_float_features">
<code class="descname">extract_float_features</code><span class="sig-paren">(</span><em>net</em>, <em>name</em>, <em>field</em>, <em>keys_to_extract</em>, <em>missing_scalar</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract_float_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to extract matrix from stacked  sparse tensors</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract_id_list_features_ranges">
<code class="descname">extract_id_list_features_ranges</code><span class="sig-paren">(</span><em>net: caffe2.python.core.Net, name: str, field: caffe2.python.schema.List, feature_names: List[str], feature_ids: List[int], empty_range: caffe2.python.core.BlobReference</em><span class="sig-paren">)</span> &#x2192; Dict[str, Dict[str, caffe2.python.core.BlobReference]]<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract_id_list_features_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the CSR-like format of ID-list to ranges and values.
See <a class="reference external" href="https://caffe2.ai/docs/operators-catalogue#gatherranges">https://caffe2.ai/docs/operators-catalogue#gatherranges</a></p>
<p>The return value is keyed by ID-list name</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract_id_score_list_features_ranges">
<code class="descname">extract_id_score_list_features_ranges</code><span class="sig-paren">(</span><em>net: caffe2.python.core.Net, name: str, field: caffe2.python.schema.List, feature_names: List[str], feature_ids: List[int], empty_range: caffe2.python.core.BlobReference</em><span class="sig-paren">)</span> &#x2192; Dict[str, Dict[str, caffe2.python.core.BlobReference]]<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract_id_score_list_features_ranges" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the CSR-like format of ID-score-list to ranges and values.
See <a class="reference external" href="https://caffe2.ai/docs/operators-catalogue#gatherranges">https://caffe2.ai/docs/operators-catalogue#gatherranges</a></p>
<p>The return value is keyed by ID-score-list name</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract_sequence_float_features">
<code class="descname">extract_sequence_float_features</code><span class="sig-paren">(</span><em>net: caffe2.python.core.Net, name: str, sequence_feature_types: Dict[str, Type[ml.rl.types.SequenceFeatureBase]], field: caffe2.python.schema.List, empty_range: caffe2.python.schema.BlobReference, zero_float: caffe2.python.schema.BlobReference</em><span class="sig-paren">)</span> &#x2192; Dict[str, caffe2.python.core.BlobReference]<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract_sequence_float_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert CSR-like format of MAP&lt;BIGINT, MAP&lt;BIGINT, FLOAT&gt;&gt; to dictionary from
sequence name to the blob containing the fixed-length sequence of vector of
float features of each element. Each blob will be 3-D tensor. The first
dimension is the batch size. The second dimension is each element in the list.
The third dimension is ordered by the order given by
<cite>SequenceFeatureBase.get_float_feature_infos()</cite>. These float features are not
normalized.</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract_sequence_id_features">
<code class="descname">extract_sequence_id_features</code><span class="sig-paren">(</span><em>net: caffe2.python.core.Net, name: str, sequence_feature_types: Dict[str, Type[ml.rl.types.SequenceFeatureBase]], sequence_id_features: Dict[str, Dict[str, ml.rl.types.IdFeatureConfig]], field: caffe2.python.schema.List, empty_range: caffe2.python.schema.BlobReference, zero_int64: caffe2.python.schema.BlobReference</em><span class="sig-paren">)</span> &#x2192; Dict[str, Dict[str, caffe2.python.core.BlobReference]]<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.extract_sequence_id_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert CSR-like format of MAP&lt;BIGINT, LIST&lt;BIGINT&gt;&gt; to dictionary from
sequence name to dictionary from ID-list name to the blob containing the
fixed-length sequence of IDs. Each blob will be 2-D tensor. The first dimension
is the batch size. The second dimension is each element in the list.</p>
</dd></dl>

<dl class="staticmethod">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.fetch">
<em class="property">static </em><code class="descname">fetch</code><span class="sig-paren">(</span><em>ws</em>, <em>b</em>, <em>to_torch=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.fetch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.fetch_state_sequence_features">
<code class="descname">fetch_state_sequence_features</code><span class="sig-paren">(</span><em>record: caffe2.python.schema.Struct</em>, <em>fetch_func</em><span class="sig-paren">)</span> &#x2192; ml.rl.types.SequenceFeatures<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.fetch_state_sequence_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Pull the values from Caffe2’s blobs into PyTorch’s tensors.</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.get_state_sequence_features_schema">
<code class="descname">get_state_sequence_features_schema</code><span class="sig-paren">(</span><em>sequence_id_features: Dict[str, Dict[str, caffe2.python.core.BlobReference]], sequence_float_features: Dict[str, caffe2.python.core.BlobReference]</em><span class="sig-paren">)</span> &#x2192; caffe2.python.schema.Struct<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.get_state_sequence_features_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Layout the record to match SequenceFeatures type. This is necessary to make ONNX
exporting works.</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.map_ids">
<code class="descname">map_ids</code><span class="sig-paren">(</span><em>net: caffe2.python.core.Net</em>, <em>name: str</em>, <em>map_handler: caffe2.python.core.BlobReference</em>, <em>raw_ids: caffe2.python.core.BlobReference</em><span class="sig-paren">)</span> &#x2192; caffe2.python.core.BlobReference<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.map_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Map raw ID to index (into embedding lookup table, usually)</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.map_sequence_id_features">
<code class="descname">map_sequence_id_features</code><span class="sig-paren">(</span><em>net: caffe2.python.core.Net, name: str, map_handlers: Dict[str, caffe2.python.core.BlobReference], raw_sequence_id_features: Dict[str, Dict[str, caffe2.python.core.BlobReference]], sequence_id_feature_configs: Dict[str, Dict[str, ml.rl.types.IdFeatureConfig]]</em><span class="sig-paren">)</span> &#x2192; Dict[str, Dict[str, caffe2.python.core.BlobReference]]<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.map_sequence_id_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Map raw IDs of all sequences’ ID features to index (into embedding lookup table)</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.range_to_dense">
<code class="descname">range_to_dense</code><span class="sig-paren">(</span><em>net: caffe2.python.core.Net</em>, <em>name: str</em>, <em>ranges: caffe2.python.core.BlobReference</em>, <em>values: caffe2.python.core.BlobReference</em>, <em>max_length: int</em>, <em>zero_val: caffe2.python.core.BlobReference</em><span class="sig-paren">)</span> &#x2192; caffe2.python.core.BlobReference<a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.range_to_dense" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert batch of variable-length lists (in range format) to fixed-length lists.</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.read_actions_to_mask">
<code class="descname">read_actions_to_mask</code><span class="sig-paren">(</span><em>net</em>, <em>name</em>, <em>num_actions</em>, <em>action</em>, <em>action_size_plus_one</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase.read_actions_to_mask" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorNet">
<em class="property">class </em><code class="descclassname">ml.rl.preprocessing.feature_extractor.</code><code class="descname">FeatureExtractorNet</code><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorNet" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<p><cite>init_net</cite> will only be run once. The external outputs of <cite>init_net</cite> are
assumed to be parameters of <cite>net</cite> and will be saved in the predictor file.
<cite>net</cite> should not use any parameters not initialized by <cite>init_net</cite>.</p>
<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorNet.init_net">
<code class="descname">init_net</code><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorNet.init_net" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.FeatureExtractorNet.net">
<code class="descname">net</code><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorNet.net" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn">
<em class="property">class </em><code class="descclassname">ml.rl.preprocessing.feature_extractor.</code><code class="descname">InputColumn</code><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.ACTION">
<code class="descname">ACTION</code><em class="property"> = 'action'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.ACTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.ACTION_PROBABILITY">
<code class="descname">ACTION_PROBABILITY</code><em class="property"> = 'action_probability'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.ACTION_PROBABILITY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.MDP_ID">
<code class="descname">MDP_ID</code><em class="property"> = 'mdp_id'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.MDP_ID" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.METRICS">
<code class="descname">METRICS</code><em class="property"> = 'metrics'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.METRICS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.NEXT_ACTION">
<code class="descname">NEXT_ACTION</code><em class="property"> = 'next_action'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.NEXT_ACTION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.NEXT_STATE_FEATURES">
<code class="descname">NEXT_STATE_FEATURES</code><em class="property"> = 'next_state_features'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.NEXT_STATE_FEATURES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.NEXT_STATE_ID_LIST_FEATURES">
<code class="descname">NEXT_STATE_ID_LIST_FEATURES</code><em class="property"> = 'next_state_id_list_features'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.NEXT_STATE_ID_LIST_FEATURES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.NEXT_STATE_ID_SCORE_LIST_FEATURES">
<code class="descname">NEXT_STATE_ID_SCORE_LIST_FEATURES</code><em class="property"> = 'next_state_id_score_list_features'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.NEXT_STATE_ID_SCORE_LIST_FEATURES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.NOT_TERMINAL">
<code class="descname">NOT_TERMINAL</code><em class="property"> = 'not_terminal'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.NOT_TERMINAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.POSSIBLE_ACTIONS">
<code class="descname">POSSIBLE_ACTIONS</code><em class="property"> = 'possible_actions'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.POSSIBLE_ACTIONS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.POSSIBLE_ACTIONS_MASK">
<code class="descname">POSSIBLE_ACTIONS_MASK</code><em class="property"> = 'possible_actions_mask'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.POSSIBLE_ACTIONS_MASK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.POSSIBLE_NEXT_ACTIONS">
<code class="descname">POSSIBLE_NEXT_ACTIONS</code><em class="property"> = 'possible_next_actions'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.POSSIBLE_NEXT_ACTIONS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.POSSIBLE_NEXT_ACTIONS_MASK">
<code class="descname">POSSIBLE_NEXT_ACTIONS_MASK</code><em class="property"> = 'possible_next_actions_mask'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.POSSIBLE_NEXT_ACTIONS_MASK" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.REWARD">
<code class="descname">REWARD</code><em class="property"> = 'reward'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.REWARD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.SEQUENCE_NUMBER">
<code class="descname">SEQUENCE_NUMBER</code><em class="property"> = 'sequence_number'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.SEQUENCE_NUMBER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.STATE_FEATURES">
<code class="descname">STATE_FEATURES</code><em class="property"> = 'state_features'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.STATE_FEATURES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.STATE_ID_LIST_FEATURES">
<code class="descname">STATE_ID_LIST_FEATURES</code><em class="property"> = 'state_id_list_features'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.STATE_ID_LIST_FEATURES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.STATE_ID_SCORE_LIST_FEATURES">
<code class="descname">STATE_ID_SCORE_LIST_FEATURES</code><em class="property"> = 'state_id_score_list_features'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.STATE_ID_SCORE_LIST_FEATURES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.STEP">
<code class="descname">STEP</code><em class="property"> = 'step'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.STEP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.TIME_DIFF">
<code class="descname">TIME_DIFF</code><em class="property"> = 'time_diff'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.TIME_DIFF" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="ml.rl.preprocessing.feature_extractor.InputColumn.TIME_SINCE_FIRST">
<code class="descname">TIME_SINCE_FIRST</code><em class="property"> = 'time_since_first'</em><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.InputColumn.TIME_SINCE_FIRST" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ml.rl.preprocessing.feature_extractor.PredictorFeatureExtractor">
<em class="property">class </em><code class="descclassname">ml.rl.preprocessing.feature_extractor.</code><code class="descname">PredictorFeatureExtractor</code><span class="sig-paren">(</span><em>state_normalization_parameters: Dict[int, ml.rl.thrift.core.ttypes.NormalizationParameters], action_normalization_parameters: Optional[Dict[int, ml.rl.thrift.core.ttypes.NormalizationParameters]] = None, normalize: bool = True, set_missing_value_to_zero: bool = False, model_feature_config: Optional[ml.rl.types.ModelFeatureConfig] = None, use_time_since_first: Optional[bool] = None, time_since_first_normalization_parameters: Optional[ml.rl.thrift.core.ttypes.NormalizationParameters] = None</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.PredictorFeatureExtractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase" title="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ml.rl.preprocessing.feature_extractor.FeatureExtractorBase</span></code></a></p>
<p>This class assumes that action is not in the input unless it’s parametric
action.</p>
<p>The features (of both states &amp; actions, if any) are expected to come in the
following blobs:
- input/float_features.keys
- input/float_features.values
- input/float_features.lengths</p>
<p>TODO: Support int features</p>
<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.PredictorFeatureExtractor.create_net">
<code class="descname">create_net</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.PredictorFeatureExtractor.create_net" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns FeatureExtractorNet to perform feature extraction.</p>
<p>The returned net must have input &amp; output record set so that it can be
bound to actual inputs/outputs</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.PredictorFeatureExtractor.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>ws</em>, <em>extract_record</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.PredictorFeatureExtractor.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>If the extractor is to be run, e.g., by the reader, then subclass should
implement</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extract_record</strong> (<em>schema.Field</em>) – the output the net</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ml.rl.preprocessing.feature_extractor.TrainingFeatureExtractor">
<em class="property">class </em><code class="descclassname">ml.rl.preprocessing.feature_extractor.</code><code class="descname">TrainingFeatureExtractor</code><span class="sig-paren">(</span><em>state_normalization_parameters: Dict[int, ml.rl.thrift.core.ttypes.NormalizationParameters], action_normalization_parameters: Optional[Dict[int, ml.rl.thrift.core.ttypes.NormalizationParameters]] = None, include_possible_actions: bool = True, normalize: bool = True, max_num_actions: int = None, set_missing_value_to_zero: bool = None, multi_steps: Optional[int] = None, metrics_to_score: Optional[List[str]] = None, model_feature_config: Optional[ml.rl.types.ModelFeatureConfig] = None, use_time_since_first: Optional[bool] = None, time_since_first_normalization_parameters: Optional[ml.rl.thrift.core.ttypes.NormalizationParameters] = None</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.TrainingFeatureExtractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase" title="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ml.rl.preprocessing.feature_extractor.FeatureExtractorBase</span></code></a></p>
<p>Extract:
- State
- Action
- Next state
- Possible next actions/Next actions</p>
<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.TrainingFeatureExtractor.create_net">
<code class="descname">create_net</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.TrainingFeatureExtractor.create_net" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns FeatureExtractorNet to perform feature extraction.</p>
<p>The returned net must have input &amp; output record set so that it can be
bound to actual inputs/outputs</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.TrainingFeatureExtractor.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>ws</em>, <em>extract_record</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.TrainingFeatureExtractor.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>If the extractor is to be run, e.g., by the reader, then subclass should
implement</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extract_record</strong> (<em>schema.Field</em>) – the output the net</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ml.rl.preprocessing.feature_extractor.WorldModelFeatureExtractor">
<em class="property">class </em><code class="descclassname">ml.rl.preprocessing.feature_extractor.</code><code class="descname">WorldModelFeatureExtractor</code><span class="sig-paren">(</span><em>seq_len, state_normalization_parameters: Dict[int, ml.rl.thrift.core.ttypes.NormalizationParameters], action_normalization_parameters: Optional[Dict[int, ml.rl.thrift.core.ttypes.NormalizationParameters]] = None, discrete_action_names: Optional[List[str]] = None, normalize: Optional[bool] = True</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.WorldModelFeatureExtractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ml.rl.preprocessing.feature_extractor.FeatureExtractorBase" title="ml.rl.preprocessing.feature_extractor.FeatureExtractorBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">ml.rl.preprocessing.feature_extractor.FeatureExtractorBase</span></code></a></p>
<p>Extract:
- State
- Action
- Next state
- Reward
- Not terminal</p>
<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.WorldModelFeatureExtractor.create_net">
<code class="descname">create_net</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.WorldModelFeatureExtractor.create_net" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns FeatureExtractorNet to perform feature extraction.</p>
<p>The returned net must have input &amp; output record set so that it can be
bound to actual inputs/outputs</p>
</dd></dl>

<dl class="method">
<dt id="ml.rl.preprocessing.feature_extractor.WorldModelFeatureExtractor.extract">
<code class="descname">extract</code><span class="sig-paren">(</span><em>ws</em>, <em>extract_record</em><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.WorldModelFeatureExtractor.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>If the extractor is to be run, e.g., by the reader, then subclass should
implement</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extract_record</strong> (<em>schema.Field</em>) – the output the net</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ml.rl.preprocessing.feature_extractor.id_list_schema">
<code class="descclassname">ml.rl.preprocessing.feature_extractor.</code><code class="descname">id_list_schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.id_list_schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ml.rl.preprocessing.feature_extractor.id_score_list_schema">
<code class="descclassname">ml.rl.preprocessing.feature_extractor.</code><code class="descname">id_score_list_schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.id_score_list_schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="ml.rl.preprocessing.feature_extractor.map_schema">
<code class="descclassname">ml.rl.preprocessing.feature_extractor.</code><code class="descname">map_schema</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ml.rl.preprocessing.feature_extractor.map_schema" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Facebook Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>